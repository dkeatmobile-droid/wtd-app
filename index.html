<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>WTD Tracker</title>

  <!-- ================= ICONS / PWA ================= -->
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="16x16" href="icon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon-32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="icon-48.png">
  <link rel="icon" type="image/png" sizes="64x64" href="icon-64.png">

  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#0b1220">

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="WTD Tracker">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- ================= STYLES ================= -->
  <style>
    :root{
      --bg:#070b14;
      --panel: rgba(255,255,255,.04);
      --panel2: rgba(255,255,255,.03);
      --text:#eaf1ff;
      --muted:#a9b7d6;

      --good:#2dd4bf;
      --warn:#fbbf24;
      --bad:#fb7185;

      --primary: rgba(77,163,255,.35);
      --primaryBorder: rgba(77,163,255,.35);

      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.08);

      --shadow: 0 10px 26px rgba(0,0,0,.22);
      --shadow2: 0 6px 18px rgba(0,0,0,.18);

      --radius: 18px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 20% -10%, rgba(18,34,74,.85) 0%, rgba(7,11,20,1) 52%),
        var(--bg);
    }
  </style>
</head>

<body class="state-ok">

  <!-- ================= HEADER ================= -->
  <header>
    <div class="headerInner">
      <div class="headerTitle">WTD Tracker</div>
      <div class="headerSub">Work & Break Working Time Directive Tracker</div>
      <div class="headerWarning">This is a beta app — times must be double checked.</div>
    </div>
  </header>

  <!-- ================= APP CONTENT ================= -->
  <main style="padding:20px;max-width:900px;margin:auto">
    <h2>Status</h2>
    <div id="statusText">Ready</div>

    <h2>Shift</h2>
    <button id="btnStart">Start shift</button>
    <button id="btnEnd">End shift</button>

    <h2>Times</h2>
    <div>Shift start: <span id="shiftStart">—</span></div>
    <div>Shift end: <span id="shiftEnd">—</span></div>
  </main>

  <!-- ================= SCRIPT ================= -->
  <script>
    (() => {
      const $ = id => document.getElementById(id);
      const now = () => Date.now();

      // ✅ FORCE 24-HOUR CLOCK EVERYWHERE
      const fmtTime = (ms) => {
        if (!ms) return "—";
        return new Date(ms).toLocaleTimeString(
          "en-GB",
          { hour:"2-digit", minute:"2-digit", hour12:false }
        );
      };

      let state = {
        shiftStart: null,
        shiftEnd: null
      };

      $("btnStart").onclick = () => {
        state.shiftStart = now();
        state.shiftEnd = null;
        $("shiftStart").textContent = fmtTime(state.shiftStart);
        $("shiftEnd").textContent = "—";
        $("statusText").textContent = "Shift running";
      };

      $("btnEnd").onclick = () => {
        if (!state.shiftStart) return;
        state.shiftEnd = now();
        $("shiftEnd").textContent = fmtTime(state.shiftEnd);
        $("statusText").textContent = "Shift ended";
      };
    })();
  </script>

</body>
</html>
