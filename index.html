<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="theme-color" content="#0f172a"/>
<title>WTD Working Time Tracker</title>

<style>
:root{
--bg1:#eef2f6;
--bg2:#f7f8fb;

--glass:rgba(255,255,255,.62);
--glassSoft:rgba(255,255,255,.5);
--glassBorder:rgba(255,255,255,.45);

--text:#0f172a;
--muted:#64748b;

--ok:#16a34a;
--warn:#f59e0b;
--due:#ef4444;
--lampOff:#6b7280;
}

*{box-sizing:border-box;}
html,body{
margin:0;
height:100%;
font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;
background:
radial-gradient(1200px 600px at 20% 0%,rgba(59,130,246,.10),transparent),
radial-gradient(900px 560px at 90% 15%,rgba(16,185,129,.10),transparent),
linear-gradient(180deg,var(--bg1),var(--bg2));
color:var(--text);
overflow:hidden;
}

/* ===== APP FRAME ===== */
.app{
height:100vh;
height:100svh;
display:flex;
flex-direction:column;
}

/* ===== HEADER ===== */
header{
padding:calc(12px + env(safe-area-inset-top)) 14px 12px;
background:linear-gradient(180deg,#0b1220,#111827);
color:#fff;
}

.headerRow{display:flex;gap:12px;align-items:flex-start;}

.brand .title{font-weight:900;font-size:15px;}
.brand .status{font-size:12px;font-weight:700;opacity:.85;}

.beta{font-size:11px;margin-top:6px;opacity:.85}

/* ===== TRAFFIC LIGHT ===== */
.signalWrap{display:flex;gap:10px;}
.signalBox{
width:62px;padding:8px;border-radius:22px;
background:#0a0a0a;
box-shadow:inset 0 1px 0 rgba(255,255,255,.06),0 10px 20px rgba(0,0,0,.35);
}
.signal{display:flex;flex-direction:column;gap:8px;align-items:center;}
.lamp{
width:40px;height:40px;border-radius:50%;
background:var(--lampOff);
box-shadow:inset 0 10px 18px rgba(0,0,0,.6);
}
.signalWrap[data-state="ok"] .lamp.green{background:var(--ok);}
.signalWrap[data-state="warn"] .lamp.amber{background:var(--warn);animation:flash 1s infinite;}
.signalWrap[data-state="due"] .lamp.red{background:var(--due);}
@keyframes flash{0%,100%{filter:brightness(1)}50%{filter:brightness(1.3)}}

.sigLabel{font-size:11px;font-weight:800;opacity:0;color:#fff}
.signalWrap[data-state="ok"] .sigLabel.green,
.signalWrap[data-state="warn"] .sigLabel.amber,
.signalWrap[data-state="due"] .sigLabel.red{opacity:1}

/* ===== iOS SHEET BACKGROUND ===== */
main{
flex:1;
padding:12px;
padding-bottom:calc(12px + env(safe-area-inset-bottom));
}

.sheet{
height:100%;
border-radius:28px 28px 0 0;
background:linear-gradient(180deg,var(--glass),var(--glassSoft));
border:1px solid var(--glassBorder);
backdrop-filter:blur(20px);
-webkit-backdrop-filter:blur(20px);
box-shadow:0 -10px 40px rgba(2,6,23,.18);
padding:12px;
display:flex;
flex-direction:column;
}

/* ===== GLASS BLOCKS ===== */
.glass{
background:linear-gradient(180deg,var(--glass),var(--glassSoft));
border:1px solid var(--glassBorder);
border-radius:20px;
backdrop-filter:blur(18px);
-webkit-backdrop-filter:blur(18px);
box-shadow:0 12px 28px rgba(2,6,23,.08);
}

/* ===== CONTROLS ===== */
.controlsRow{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;}
.btn{
padding:12px;border-radius:18px;border:1px solid rgba(15,23,42,.12);
font-weight:800;background:rgba(255,255,255,.8);
}
.btn.primary{background:#0f172a;color:#fff;}
.btn.startShift.isRunning{background:#0b3b1f;color:#fff;}
.btn.big{padding:16px;font-size:16px;}

.controlStrip{padding:10px;display:flex;justify-content:space-between;align-items:center;}
.rocker{display:flex;gap:4px;background:rgba(255,255,255,.6);padding:4px;border-radius:999px;}
.rockerBtn{border:0;padding:8px 10px;border-radius:999px;background:transparent;font-weight:800;}
.rockerBtn.isOn{background:#fff;}

.miniGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.card{padding:12px;}
.metric{font-size:18px;font-weight:900;margin-top:6px;}

.bigActions{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;}

/* ===== FULL MODE ===== */
.fullScroll{flex:1;overflow:auto;-webkit-overflow-scrolling:touch;padding-bottom:40px;}

/* ===== MOBILE FIT ===== */
@media(max-height:720px){
.lamp{width:36px;height:36px;}
.metric{font-size:16px;}
.btn.big{padding:14px;font-size:15px;}
}
</style>
</head>

<body>
<div class="app">

<header>
<div class="headerRow">

<div id="signalWrap" class="signalWrap" data-state="off">
<div class="signalBox">
<div class="signal">
<div class="lamp red"></div>
<div class="lamp amber"></div>
<div class="lamp green"></div>
</div>
</div>
<div>
<div class="sigLabel red">STOP — break required</div>
<div class="sigLabel amber">Break upcoming</div>
<div class="sigLabel green">Compliant</div>
</div>
</div>

<div class="brand">
<div class="title">WTD Working Time Tracker</div>
<div id="headerStatus" class="status">Ready</div>
</div>

</div>

<div class="beta"><strong>Not a driving hours tracker.</strong> Working time only — beta.</div>
</header>

<main>
<div class="sheet">

<div class="controlsRow">
<button id="btnStartShift" class="btn primary startShift">Start shift</button>
<button id="btnEndShift" class="btn">End shift</button>
<button id="btnResetDay" class="btn">Reset day</button>
</div>

<div class="glass controlStrip">
<div class="rocker">
<button id="btnViewBasic" class="rockerBtn isOn">Basic</button>
<button id="btnViewFull" class="rockerBtn">Full</button>
</div>

<div style="display:flex;align-items:center;gap:6px;">
<div style="font-size:11px;font-weight:700;color:#334155;">Length of shift</div>
<div class="rocker">
<button id="btnShift13" class="rockerBtn isOn">13h</button>
<button id="btnShift15" class="rockerBtn">15h</button>
</div>
</div>
</div>

<div class="bigActions">
<button id="btnWork" class="btn big">Work</button>
<button id="btnBreak" class="btn big">Break</button>
</div>

<div class="miniGrid" style="margin-top:10px;">
<div class="glass card"><div>Shift time</div><div id="uiShiftTime" class="metric">00:00</div></div>
<div class="glass card"><div>Continuous work</div><div id="uiContinuous" class="metric">00:00</div></div>
<div class="glass card"><div>Next break</div><div id="uiNextBreakIn" class="metric">—</div></div>
<div class="glass card"><div>Break needed</div><div id="uiBreakNeeded" class="metric">00:00</div></div>
</div>

</div>
</main>
</div>

<script>
const signalWrap=document.getElementById("signalWrap");
const headerStatus=document.getElementById("headerStatus");
const btnStart=document.getElementById("btnStartShift");
const btnEnd=document.getElementById("btnEndShift");

let shiftStart=null;

function haptic(){
if(navigator.vibrate) navigator.vibrate(10);
}

function setState(level,text){
signalWrap.dataset.state=level;
headerStatus.textContent=text;
}

btnStart.onclick=()=>{
if(shiftStart)return;
haptic();
shiftStart=Date.now();
btnStart.classList.add("isRunning");
btnStart.textContent="Shift running";
};

btnEnd.onclick=()=>{
haptic();
shiftStart=null;
btnStart.classList.remove("isRunning");
btnStart.textContent="Start shift";
signalWrap.dataset.state="off";
headerStatus.textContent="Ready";
};

setInterval(()=>{
if(!shiftStart)return;
const t=(Date.now()-shiftStart)/3600000;
if(t<5.5)setState("ok","Compliant");
else if(t<6)setState("warn","Break soon");
else setState("due","Break due");
},1000);
</script>

</body>
</html>
